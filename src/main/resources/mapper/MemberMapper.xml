<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chop.dao.MemberDao">

  <!-- 컬럼 이름과 자바 객체의 프로퍼티 이름을 연결한다. -->
   <resultMap type="Member" id="MemberMap">
    <id column="member_id"         property="no"/>
    <result column="password"   property="password"/>
    <result column="email" property="email"/>
    <result column="photo"   property="photo"/>
    <result column="nickname"   property="nickname"/>
    <result column="tel"   property="tel"/>
    <result column="post_no"   property="postNo"/>
    <result column="base_address"   property="baseAddress"/>
    <result column="detail_address"   property="detailAddress"/>
    <result column="grade"   property="grade"/>
  </resultMap>
  



  <select id="findAll" resultMap="MemberMap">
  select 
    member_id,
    password,
    email,
    photo,
    nickname,
    tel,
    post_no,
    base_address,
    detail_address,
    grade
  from member 
  order by member_id
  </select>
  
  <insert id="insert" parameterType="Member"
  useGeneratedKeys="true"
          keyColumn="member_id"
          keyProperty="no">
    insert into member(member_id,
    password,
    email,
    photo,
    nickname,
    tel,
    post_no,
    base_address,
    detail_address,
    grade)
    values(#{no}, #{password}, #{email}, #{photo}, #{nickname}, #{tel}, #{postNo}, #{baseAddress}, #{detailAddress}, #{grade}) 
  </insert>
  
  
  
  <select id="findBy" parameterType="int" resultMap="MemberMap">
    select * from member
    where member_id=#{haha} 
  </select>
  
  <update id="update" parameterType="Member">
    update member
    <set>
      <if test="email != null">email=#{email},</if>
      <if test="nickname != null">nickname=#{nickname}</if> 
    </set>
    where member_id=#{no}
  </update>
  
  <delete id="delete" parameterType="int">
     delete from member 
   where member_id=#{value}
  </delete>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</mapper>